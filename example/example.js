let fs = require("fs");
let { Bitmap } = require("../dist/Bitmap");
const { BitmapChannel } = require("../dist/BitmapChannel");
const { Color } = require("../dist/Color");
const { Point } = require("../dist/Point");
const { Rectangle } = require("../dist/Rectangle");
const { Util } = require("../dist/Util");
const { Writable } = require('stream');
const { BlendMode } = require("../dist/BlendMode");
const { ColorUtil } = require("../dist/ColorUtil");
const { ColorMatrix } = require("../dist/ColorMatrix");

let base64 = "data:image/png;base64,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";

Bitmap.fromBase64(base64).then(source => {
    source.clone().save("./example/out.png");
    source.clone().colorMatrix(ColorMatrix.getBrightness(180)).save("./example/out1.png");
    source.clone().colorMatrix(ColorMatrix.getSaturation(1.8)).save("./example/out2.png");
    source.clone().colorMatrix(ColorMatrix.gray).save("./example/out3.png");
})



